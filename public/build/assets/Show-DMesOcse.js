import{C as k,r as v,o as n,c as d,w as u,a as o,g as s,d as U,u as a,b as A,f as m,h as w,v as P,e as p,j as C,P as _}from"./app-Bmo5HFoe.js";import{_ as f}from"./Input-CpbyHh2Y.js";import{_ as S}from"./AdminLayout-J5-NyEiv.js";import{_ as i}from"./InputError-1DCSaM6V.js";import{_ as g}from"./CardInput-CCMh69wG.js";import{u as N}from"./pagination-BhSgCxto.js";import"./BaseLayout-BoV4VSrS.js";import"./LogoutModal-BtPpPKvC.js";const T={class:"flex w-full gap-4"},B={class:"p-2 lg:px-4"},D={class:"grid grid-cols-1 xl:grid-cols-2 mx-auto gap-4"},j={class:"h-full flex justify-center"},$={key:0,class:"flex flex-col gap-4"},L=["src"],M={key:1,class:"btn btn-sm"},R={class:"ml-4 my-10 flex items-center gap-4 cursor-pointer"},q={key:0},E={class:"grid grid-cols-1 xl:grid-cols-2 mx-auto gap-4"},F={key:1,class:"text-xs"},W={__name:"Show",props:{user:{type:Object,required:!0}},setup(r){const e=k({no_anggota:r.user.no_anggota,nama:r.user.nama,tanggal_lahir:r.user.tanggal_lahir,tempat_lahir:r.user.tempat_lahir,agama:r.user.agama,alamat:r.user.alamat,unlat:r.user.unlat,foto:r.user.foto,tahun_angkatan:r.user.tahun_angkatan,withAccount:!!r.user.username,username:r.user.username,password:"",photoDeleted:!1}),x=v(null),h=b=>{const t=b.target.files[0];if(e.foto=t,t!=null){const l=new FileReader;l.onload=()=>{x.value=l.result},l.readAsDataURL(t)}},y=()=>{r.user.foto&&(e.photoDeleted=!0),x.value=null,e.foto=""},V=()=>{e.foto==r.user.foto&&e.foto=="",e.post(route("users.update",r.user.id),{headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{},onError:()=>{}})},c=N();return(b,t)=>(n(),d(S,null,{contentHeader:u(()=>[o("div",T,[s(a(_),{href:b.route("users.index",{page:a(c).getCurrentPage,search:a(c).getSearchKey}),class:"btn btn-sm btn-neutral"},{default:u(()=>t[11]||(t[11]=[o("i",{class:"ri-arrow-left-line"},null,-1),U("Back ")])),_:1},8,["href"]),t[12]||(t[12]=o("h2",{class:"text-2xl"},"Detail User",-1))])]),default:u(()=>[o("div",B,[o("form",{onSubmit:A(V,["prevent"])},[t[16]||(t[16]=o("h3",{class:"w-fit text-lg px-4 py-2 mb-4 ml-4 border-b-2 border-base-content/50 font-semibold"},"User Profile",-1)),o("div",D,[s(g,{class:"max-w-lg mx-auto",label:"No. Anggota (14 digit, ex: 01010160062024)"},{default:u(()=>[s(f,{modelValue:a(e).no_anggota,"onUpdate:modelValue":t[0]||(t[0]=l=>a(e).no_anggota=l),type:"text",maxlength:"14",pattern:"\\d{14}"},null,8,["modelValue"]),a(e).errors.no_anggota?(n(),d(i,{key:0,message:a(e).errors.no_anggota},null,8,["message"])):m("",!0)]),_:1}),s(g,{class:"max-w-lg mx-auto",label:"Nama"},{default:u(()=>[s(f,{modelValue:a(e).nama,"onUpdate:modelValue":t[1]||(t[1]=l=>a(e).nama=l),type:"text"},null,8,["modelValue"]),a(e).errors.nama?(n(),d(i,{key:0,message:a(e).errors.nama},null,8,["message"])):m("",!0)]),_:1}),s(g,{class:"max-w-lg mx-auto",label:"Tanggal Lahir"},{default:u(()=>[s(f,{modelValue:a(e).tanggal_lahir,"onUpdate:modelValue":t[2]||(t[2]=l=>a(e).tanggal_lahir=l),type:"date"},null,8,["modelValue"]),a(e).errors.tanggal_lahir?(n(),d(i,{key:0,message:a(e).errors.tanggal_lahir},null,8,["message"])):m("",!0)]),_:1}),s(g,{class:"max-w-lg mx-auto",label:"Tempat Lahir"},{default:u(()=>[s(f,{modelValue:a(e).tempat_lahir,"onUpdate:modelValue":t[3]||(t[3]=l=>a(e).tempat_lahir=l),type:"text"},null,8,["modelValue"]),a(e).errors.tempat_lahir?(n(),d(i,{key:0,message:a(e).errors.tempat_lahir},null,8,["message"])):m("",!0)]),_:1}),s(g,{class:"max-w-lg mx-auto",label:"Agama"},{default:u(()=>[s(f,{modelValue:a(e).agama,"onUpdate:modelValue":t[4]||(t[4]=l=>a(e).agama=l),type:"text"},null,8,["modelValue"]),a(e).errors.agama?(n(),d(i,{key:0,message:a(e).errors.agama},null,8,["message"])):m("",!0)]),_:1}),s(g,{class:"max-w-lg mx-auto",label:"Unlat"},{default:u(()=>[s(f,{modelValue:a(e).unlat,"onUpdate:modelValue":t[5]||(t[5]=l=>a(e).unlat=l),type:"text"},null,8,["modelValue"]),a(e).errors.unlat?(n(),d(i,{key:0,message:a(e).errors.unlat},null,8,["message"])):m("",!0)]),_:1}),s(g,{class:"max-w-lg mx-auto",label:"Tahun Angkatan"},{default:u(()=>[s(f,{modelValue:a(e).tahun_angkatan,"onUpdate:modelValue":t[6]||(t[6]=l=>a(e).tahun_angkatan=l),type:"number",min:"1900",max:"2099",step:"1"},null,8,["modelValue"]),a(e).errors.tahun_angkatan?(n(),d(i,{key:0,message:a(e).errors.tahun_angkatan},null,8,["message"])):m("",!0)]),_:1}),s(g,{class:"max-w-lg mx-auto",label:"Alamat"},{default:u(()=>[w(o("textarea",{"onUpdate:modelValue":t[7]||(t[7]=l=>a(e).alamat=l),rows:"5",class:"textarea textarea-bordered textarea-sm"},null,512),[[P,a(e).alamat]]),a(e).errors.alamat?(n(),d(i,{key:0,message:a(e).errors.alamat},null,8,["message"])):m("",!0)]),_:1}),s(g,{class:"max-w-lg mx-auto xl:col-start-2 xl:row-start-4 xl:row-span-2",label:"Foto"},{default:u(()=>[o("div",j,[x.value||a(e).foto?(n(),p("div",$,[o("img",{src:x.value?x.value:"/"+a(e).foto,class:"h-full max-h-48 aspect-square object-fill mask mask-circle"},null,8,L),o("button",{type:"button",onClick:y,class:"btn btn-sm btn-error"},"Remove Photo")])):(n(),p("label",M,[t[13]||(t[13]=o("span",null,"Select Photo",-1)),s(f,{onChange:h,type:"file",accept:"image/*",class:"hidden"})])),a(e).errors.foto&&!x.value?(n(),d(i,{key:2,message:a(e).errors.foto},null,8,["message"])):m("",!0)])]),_:1})]),o("label",R,[t[14]||(t[14]=o("span",null,"Add Account to this User ?",-1)),w(o("input",{"onUpdate:modelValue":t[8]||(t[8]=l=>a(e).withAccount=l),type:"checkbox",class:"checkbox"},null,512),[[C,a(e).withAccount]])]),a(e).withAccount?(n(),p("div",q,[t[15]||(t[15]=o("h3",{class:"w-fit text-lg px-4 p-2 mb-4 ml-4 border-b-2 border-base-content/50 font-semibold"},"User Account",-1)),o("div",E,[s(g,{class:"max-w-lg mx-auto",label:"Username"},{default:u(()=>[s(f,{modelValue:a(e).username,"onUpdate:modelValue":t[9]||(t[9]=l=>a(e).username=l),type:"text"},null,8,["modelValue"]),a(e).errors.username?(n(),d(i,{key:0,message:a(e).errors.username},null,8,["message"])):m("",!0)]),_:1}),s(g,{class:"max-w-lg mx-auto",label:r.user.username?"Change Password ?":"Password"},{default:u(()=>[s(f,{modelValue:a(e).password,"onUpdate:modelValue":t[10]||(t[10]=l=>a(e).password=l),type:"password"},null,8,["modelValue"]),a(e).errors.password?(n(),d(i,{key:0,message:a(e).errors.password},null,8,["message"])):m("",!0),r.user.username?(n(),p("span",F,"if empty, then the password is not changed")):m("",!0)]),_:1},8,["label"])])])):m("",!0),t[17]||(t[17]=o("div",{class:"flex flex-row-reverse w-full mt-10 px-4"},[o("button",{type:"submit",class:"btn btn-info"},"Update")],-1))],32)])]),_:1}))}};export{W as default};
